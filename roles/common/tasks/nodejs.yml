
 - name: Configuring Node Js Repo for {{COMPONENT}}
   ansible.builtin.shell: curl --silent --location https://rpm.nodesource.com/setup_16.x | sudo bash -

 - name: Installing NodeJS on  {{COMPONENT}}-{{ENV}} server
   ansible.builtin.package:
      name: nodejs
      state: present

# Creating a user account in Ansible

 - name: Creating App user 
   ansible.builtin.include_role:
     name: common
     tasks_from: create_user 

    

 - name: Download and Extracting the {{ COMPONENT }} 
   ansible.builtin.include_role:
     name: common
     tasks_from: download

 - name: Generating artifact with npm install
   community.general.npm:
     path: /home/{{APPUSER}}/{{COMPONENT}}/


 - name: Copying the systemd File
   ansible.builtin.template:
      src:  systemd.service
      dest: /etc/systemd/system/{{COMPONENT}}.service
       
 - name: Restarting {{COMPONENT}}
   ansible.builtin.systemd:
      name: "{{COMPONENT}}"
      state: restarted
      enabled: true
      daemon_reload: true

 - name: configuring Node name Repo
   ansible.builtin.shell: set-hostname {{COMPONENT}}-{{ENV}}